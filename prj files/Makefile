#-------prj2--------------------------------------------#

all: seq_detectora.vbe \
     seq_detectorj.vbe \
     seq_detectorm.vbe \
     seq_detectoro.vbe \
     seq_detectorr.vbe 
	     @echo "<-- Generated"

#-------Finite State Machine Synthesis-----------------#

vhd_to_fsm:
	rename .vhd .fsm *.vhd

seq_detectora.vbe: seq_detector.fsm
	@echo "    Encoding Synthesis -> prj2_a.vbe"
	syf -CEV -a seq_detector
 
seq_detectorj.vbe: seq_detector.fsm
	@echo "    Encoding Synthesis  -> sdetj.vbe"
	syf -CEV -j seq_detector
 
seq_detectorm.vbe: seq_detector.fsm
	@echo "    Encoding Synthesis  -> sdetm.vbe"
	syf -CEV -m seq_detector
 
seq_detectoro.vbe: seq_detector.fsm
	@echo "    Encoding Synthesis  -> sdeto.vbe"
	syf -CEV -o seq_detector
 
seq_detectorr.vbe: seq_detector.fsm
	@echo "    Encoding Synthesis  -> sdetr.vbe"
	syf -CEV -r seq_detector

#-------Clean Up---------------------------------------#

clean :
	rm -f  *.vbe *.enc *~
	@echo "Erase all the files generated by the makefile"

#-------------------Boom--------------------------------#

boom_all: seqdet_a_b.vbe \
	seqdet_j_b.vbe \
	seqdet_m_b.vbe \
	seqdet_o_b.vbe \
	seqdet_r_b.vbe



seqdet_a_b.vbe: seq_detectora.vbe
	boom -V -d 50 seq_detectora seqdet_a_b > seqdet_a_boom.out

seqdet_j_b.vbe: seq_detectorj.vbe
	boom -V -d 50 seq_detectorj seqdet_j_b > seqdet_j_boom.out

seqdet_m_b.vbe: seq_detectorm.vbe
	boom -V -d 50 seq_detectorm seqdet_m_b > seqdet_m_boom.out

seqdet_o_b.vbe: seq_detectoro.vbe
	boom -V -d 50 seq_detectoro seqdet_o_b > seqdet_o_boom.out

seqdet_r_b.vbe: seq_detectorr.vbe
	boom -V -d 50 seq_detectorr seqdet_r_b > seqdet_r_boom.out

#-----------------------------boog--------------------------#
boog_all: seqdet_a_b.vst \
	seqdet_j_b.vst \
	seqdet_m_b.vst \
	seqdet_o_b.vst \
	seqdet_r_b.vst 
	
seqdet_a_b.vst : seq_detectora.vbe paramfile.lax
	boog -x 1 -l paramfile seq_detectora > seqdet_a_boog.out

seqdet_j_b.vst : seq_detectorj.vbe paramfile.lax
	boog -x 1 -l paramfile seq_detectorj > seqdet_j_boog.out

seqdet_m_b.vst : seq_detectorm.vbe paramfile.lax
	boog -x 1 -l paramfile seq_detectorm > seqdet_m_boog.out

seqdet_o_b.vst : seq_detectoro.vbe paramfile.lax
	boog -x 1 -l paramfile seq_detectoro > seqdet_o_boog.out

seqdet_r_b.vst : seq_detectorr.vbe paramfile.lax
	boog -x 1 -l paramfile seq_detectorr > seqdet_r_boog.out

#---------------------loon---------------------------------#
loon_all: seqdet_a_b_l.vst \
	seqdet_j_b_l.vst \
	seqdet_m_b_l.vst \
	seqdet_o_b_l.vst \
	seqdet_r_b_l.vst 



seqdet_a_b_l.vst: seq_detectora.vst paramfile.lax
	loon -x 1 seq_detectora seqdet_a_b_l paramfile > seqdet_a_bl_loon.out

seqdet_j_b_l.vst: seq_detectorj.vst paramfile.lax
	loon -x 1 seq_detectorj seqdet_j_b_l paramfile > seqdet_j_bl_loon.out

seqdet_m_b_l.vst: seq_detectorm.vst paramfile.lax
	loon -x 1 seq_detectorm seqdet_m_b_l paramfile > seqdet_m_bl_loon.out

seqdet_o_b_l.vst: seq_detectoro.vst paramfile.lax
	loon -x 1 seq_detectoro seqdet_o_b_l paramfile > seqdet_o_bl_loon.out

seqdet_r_b_l.vst: seq_detectorr.vst paramfile.lax
	loon -x 1 seq_detectorr seqdet_r_b_l paramfile > seqdet_r_bl_loon.out



#---------------------loon2---------------------------------#
loon2_all: seqdet_a_b_l2.vst \
	seqdet_j_b_l2.vst \
	seqdet_m_b_l2.vst \
	seqdet_o_b_l2.vst \
	seqdet_r_b_l2.vst 



seqdet_a_b_l2.vst: seq_detectora.vst paramfile.lax
	loon -x 0 seq_detectora seqdet_a_b_l2 paramfile > seqdet_a_bl2_loon.out

seqdet_j_b_l2.vst: seq_detectorj.vst paramfile.lax
	loon -x 0 seq_detectorj seqdet_j_b_l2 paramfile > seqdet_j_bl2_loon.out

seqdet_m_b_l2.vst: seq_detectorm.vst paramfile.lax
	loon -x 0 seq_detectorm seqdet_m_b_l2 paramfile > seqdet_m_bl2_loon.out

seqdet_o_b_l2.vst: seq_detectoro.vst paramfile.lax
	loon -x 0 seq_detectoro seqdet_o_b_l2 paramfile > seqdet_o_bl2_loon.out

seqdet_r_b_l2.vst: seq_detectorr.vst paramfile.lax
	loon -x 0 seq_detectorr seqdet_r_b_l2 paramfile > seqdet_r_bl2_loon.out


#-----------------flatbeh and proof---------------------------#

seqdet_o_b_l_net.vbe: seqdet_o_b_l.vst seq_detectoro.vbe
	flatbeh seqdet_o_b_l seqdet_o_b_l_net > seqdet_o_b_l_net_flatbeh.out 
	proof -d seq_detectoro seqdet_o_b_l_net > seqdet_o_proof.out


#------------------------------------------------------------##

seqdet_p.ap: sedet.ioc seqdet_o_b_l_scan.vst
	MBK_IN_LO=vst; export MBK_IN_LO; \
	MBK_OUT_PH=ap; export MBK_OUT_PH;\
	ocp -v -ring -ioc seqdet.ioc seqdet_o_b_l_scan
seqdet_p > ocp.out

